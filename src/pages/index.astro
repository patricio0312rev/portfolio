---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { Navbar } from '@/components/layout/Navbar';
import { Footer } from '@/components/layout/Footer';
import { Hero } from '@/components/sections/Hero';
import { About } from '@/components/sections/About';
import { Experience } from '@/components/sections/Experience';
import { Education } from '@/components/sections/Education';
import { Awards } from '@/components/sections/Awards';
import { Publications } from '@/components/sections/Publications';
import { Contact } from '@/components/sections/Contact';

// Import data
import jobsData from '@/data/jobs.json';
import educationData from '@/data/education.json';
import awardsData from '@/data/awards.json';
import publicationsData from '@/data/publications.json';

// Sort jobs by start date (most recent first)
const jobs = jobsData.sort((a, b) => {
  return new Date(b.startDate).getTime() - new Date(a.startDate).getTime();
});

// Sort education by start date (most recent first)
const education = educationData.sort((a, b) => {
  return new Date(b.startDate).getTime() - new Date(a.startDate).getTime();
});

// Sort awards by date (most recent first)
const awards = awardsData.sort((a, b) => {
  return new Date(b.date).getTime() - new Date(a.date).getTime();
});

// Sort publications by date (most recent first)
const publications = publicationsData.sort((a, b) => {
  return new Date(b.date).getTime() - new Date(a.date).getTime();
});
---

<BaseLayout>
  <Navbar client:load />
  
  <main>
    <Hero client:load />
    <About client:visible />
    <Experience jobs={jobs} client:visible />
    <Education education={education} client:visible />
    <Awards awards={awards} client:visible />
    <Publications publications={publications} client:visible />
    <Contact client:visible />
  </main>
  
  <Footer />
</BaseLayout>
